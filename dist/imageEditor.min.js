"use strict";var ImageEditor;ImageEditor=function(){function t(t){var e,i;null==t&&(t={}),(t.elt||t.pic)&&(i=this,i.config=t,e=i.config.elt,i.canvas=e.querySelector("canvas"),i.btLeft=e.querySelector(".bt-left"),i.btRight=e.querySelector(".bt-right"),i.btLess=e.querySelector(".bt-less"),i.btMore=e.querySelector(".bt-more"),i.btSave=e.querySelector(".bt-save"),i.doc=document,i.context=i.canvas.getContext("2d"),i.cnvW=i.canvas.width,i.cnvH=i.canvas.height,i.cnvRatio=i.canvas.height/i.canvas.width,i.zoom=1.1,i.currentZoom=1,i.maxZoom=20,i.picture=new Image,i.picture.setAttribute("crossOrigin","anonymous"),i.picture.src=i.config.pic,i.picture.onload=function(){return i.init()})}return t.prototype.init=function(){var t;return t=this,t.btLeft.addEventListener("click",t.turnLeft.bind(t),!1),t.btRight.addEventListener("click",t.turnRight.bind(t),!1),t.btLess.addEventListener("click",t.zoomOut.bind(t),!1),t.btMore.addEventListener("click",t.zoomIn.bind(t),!1),t.btSave.addEventListener("click",t.saveImage.bind(t),!1),t.imgSettings(),t.drawImage(),t.initialized=!0},t.prototype.update=function(t){var e;return e=this,e.picture=new Image,e.picture.setAttribute("crossOrigin","anonymous"),e.picture.src=t,e.imgSettings(),e.drawImage()},t.prototype.imgSettings=function(){var t,e;return e=this,e.picRatio=e.picture.height/e.picture.width,t=e.picRatio<1,e.imgW=t?e.cnvW/e.picRatio:e.cnvW,e.imgH=t?e.cnvH:e.cnvH*e.picRatio},t.prototype.turnLeft=function(){var t;return t=this,console.log("turnLeft")},t.prototype.turnRight=function(){var t;return t=this,console.log("turnRight")},t.prototype.zoomOut=function(){var t;return t=this,t.currentZoom<=1?void 0:(t.imgW/=t.zoom,t.imgH/=t.zoom,t.currentZoom--,t.drawImage())},t.prototype.zoomIn=function(){var t;return t=this,t.currentZoom>t.maxZoom?void 0:(t.imgW*=t.zoom,t.imgH*=t.zoom,t.currentZoom++,t.drawImage())},t.prototype.drawImage=function(){var t;return t=this,t.context.drawImage(t.picture,0,0,t.imgW,t.imgH)},t.prototype.saveImage=function(){var t;return t=this,console.log("saveImage")},t}();